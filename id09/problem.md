# 问题

## 问题描述
一家名为 Haus Toys 的玩具制造商可以生产和销售四种玩具：卡车、飞机、船和火车。每种玩具的单位利润、所需木材和钢材量均不相同。公司拥有有限的木材（890单位）和钢材（500单位）库存。

生产决策需遵循以下特殊规则：
1.  如果生产卡车，则不能生产火车。
2.  如果生产船，则必须也生产飞机。
3.  生产的船的数量不能超过火车的数量。

该公司的目标是决定每种玩具的生产数量，以在满足所有资源和逻辑约束的前提下，实现总利润的最大化。

## 问题分析
这是一个典型的**混合整数线性规划 (Mixed-Integer Linear Programming, MILP)** 问题。该问题的核心是在满足多种资源（木材、钢材）和复杂的逻辑约束条件下，确定最优的整数生产批量，以最大化总利润。问题的复杂性主要来自于其中的“如果...则...”和“互斥”类型的逻辑约束，这些约束需要引入辅助的二元变量来建模。

值得注意的是，模型中的约束之间存在着深刻的逻辑联动。例如，约束(3)“生产卡车则不生产火车”与约束(5)“船的产量不超过火车”相结合，会产生一个重要的推论：如果公司决策生产卡车 ($y_1=1$)，则火车产量必须为零 ($x_4=0$)，进而导致船的产量也必须为零 ($x_3=0$)。因此，**选择生产卡车这一决策，将自动禁止生产火车和船两种玩具**。

## 核心假设
1.  **所有产成品均可售出**: 模型不考虑市场需求上限或销售不确定性，假设生产出的任何数量的玩具都能以其既定利润售出。
2.  **无固定成本**: 模型只考虑与产量相关的变动利润，不考虑开启或关闭某条生产线可能产生的固定成本。
3.  **资源与利润的线性**: 生产单位玩具所消耗的资源和产生的利润是恒定的、可累加的，不存在规模效应。
4.  **确定性**: 所有参数（利润、资源消耗量、资源可用量）都是已知的、确定的数值。
5.  **整数产量**: 玩具的生产数量必须为非负整数。

## 数据定义
此问题中的数据可分为玩具属性、资源可用性和逻辑关系。

*   **集合 (Sets)**
    *   $I$: 所有玩具类型的集合, $I = \{1, 2, 3, 4\}$，分别代表卡车、飞机、船、火车。

*   **参数 (Parameters)**
    *   $p_i$: 销售玩具 $i$ 的单位利润。
    *   $w_i$: 制造一个玩具 $i$ 所需的木材单位。
    *   $s_i$: 制造一个玩具 $i$ 所需的钢材单位。
    *   $W_{max}$: 可用的木材总量。
    *   $S_{max}$: 可用的钢材总量。
    *   $M_i$: 一个足够大但尽可能紧凑的正数，用作逻辑约束的系数。其值为在不考虑其他玩具生产的情况下，仅凭资源约束所能生产的玩具 $i$ 的最大理论数量，即 $M_i = \min(\lfloor \frac{W_{max}}{w_i} \rfloor, \lfloor \frac{S_{max}}{s_i} \rfloor)$。

具体数值如下：
| 索引 $i$ | 玩具类型 | 利润 $p_i$ (\$) | 木材需求 $w_i$ | 钢材需求 $s_i$ | 最大理论产量 $M_i$ |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | 卡车 | 5 | 12 | 6 | $\min(\lfloor\frac{890}{12}\rfloor, \lfloor\frac{500}{6}\rfloor) = 74$ |
| 2 | 飞机 | 10 | 20 | 3 | $\min(\lfloor\frac{890}{20}\rfloor, \lfloor\frac{500}{3}\rfloor) = 44$ |
| 3 | 船 | 8 | 15 | 5 | $\min(\lfloor\frac{890}{15}\rfloor, \lfloor\frac{500}{5}\rfloor) = 59$ |
| 4 | 火车 | 7 | 10 | 4 | $\min(\lfloor\frac{890}{10}\rfloor, \lfloor\frac{500}{4}\rfloor) = 89$ |
| | **资源上限** | | $W_{max} = 890$ | $S_{max} = 500$ | |

# 数学形式

## 变量定义
为了构建模型，我们定义两类决策变量：
*   $x_i$: 一个非负整数变量，表示玩具类型 $i$ 的生产数量。
    *   $x_i \in \mathbb{Z}^+, \forall i \in I$
*   $y_i$: 一个二元变量，用于指示是否生产玩具类型 $i$。如果生产玩具 $i$（即 $x_i > 0$），则 $y_i=1$；否则 $y_i=0$。
    *   $y_i \in \{0, 1\}, \forall i \in I$

## 目标函数
目标是最大化所有售出玩具的总利润。
*   **最大化总利润:** $\max \sum_{i \in I} p_i \cdot x_i$
    *   **具体形式:** $\max (5x_1 + 10x_2 + 8x_3 + 7x_4)$

## 约束条件
生产计划必须满足以下所有约束：

1.  **木材资源约束 (Wood Resource Constraint):**
    *   **说明:** 生产所有玩具消耗的木材总量不能超过可用的木材总量。
    *   **公式:** $\sum_{i \in I} w_i \cdot x_i \le W_{max}$
    *   **具体形式:** $12x_1 + 20x_2 + 15x_3 + 10x_4 \le 890$

2.  **钢材资源约束 (Steel Resource Constraint):**
    *   **说明:** 生产所有玩具消耗的钢材总量不能超过可用的钢材总量。
    *   **公式:** $\sum_{i \in I} s_i \cdot x_i \le S_{max}$
    *   **具体形式:** $6x_1 + 3x_2 + 5x_3 + 4x_4 \le 500$

3.  **生产互斥约束 (Production Exclusivity Constraint):**
    *   **说明:** 如果生产卡车（$y_1=1$），则不能生产火车（$y_4=0$）。这两种生产活动最多只能选择一种。
    *   **公式:** $y_1 + y_4 \le 1$

4.  **生产依存约束 (Production Dependency Constraint):**
    *   **说明:** 如果生产船（$y_3=1$），则必须生产飞机（$y_2=1$）。
    *   **公式:** $y_3 \le y_2$

5.  **生产数量比例约束 (Production Ratio Constraint):**
    *   **说明:** 船的生产数量不能超过火车的生产数量。
    *   **公式:** $x_3 \le x_4$

6.  **生产决策与产量的关联约束 (Linking Constraints for Production and Quantity):**
    *   **说明:** 这些约束将整数生产变量 $x_i$ 与其对应的二元指示变量 $y_i$ 紧密关联起来。
    *   **产量上限关联:** 如果决定不生产某种玩具（$y_i=0$），则其产量必须为零（$x_i=0$）。
        *   **公式:** $x_i \le M_i \cdot y_i, \forall i \in I$
    *   **生产激活关联:** 如果决定生产某种玩具（$y_i=1$），则其产量必须至少为1。这严格定义了“生产”的含义。
        *   **公式:** $x_i \ge y_i, \forall i \in I$

7.  **变量域约束 (Variable Domain Constraints):**
    *   **说明:** 生产数量必须为非负整数，指示变量必须为0或1。
    *   **公式:**
        *   $x_i \in \{0, 1, 2, ...\}, \forall i \in I$
        *   $y_i \in \{0, 1\}, \forall i \in I$