# 问题

## 问题描述
一位规划者需要为一顿晚餐选择食材组合，目标是最大化总蛋白质摄入量。食材分为两类：蛋白质主食（鸡肉、三文鱼、豆腐）和蔬菜（西兰花、胡萝卜、菠菜、甜椒、蘑菇）。蛋白质主食可以按任意克数购买，而蔬菜则以100克的包装为基本单位，可以购买任意整数数量的包装。

选择需遵循以下限制：
1.  总花费不得超过 $20。
2.  所有食材的总重量不得超过800克。
3.  必须选择至少三种不同种类的蔬菜。

## 问题分析
这是一个典型的**混合整数线性规划 (Mixed-Integer Linear Programming, MILP)** 问题。该模型旨在优化一个线性目标函数（最大化蛋白质），同时满足一系列线性约束（预算、重量等）。决策变量包含连续变量（蛋白质主食的购买量）和整数/二元变量（蔬菜的购买决策），因此是“混合整数”规划。

## 核心假设
1.  所有食材的蛋白质含量、成本和重量都是线性的、可累加的。
2.  蛋白质主食的购买量可以为任意非负实数（连续可分）。
3.  蔬菜以100克包装为单位，可购买任意非负整数数量的包装。
4.  所有购买的食材都将被完全用于计算，不存在浪费。

## 数据定义
问题中的数据可分为两类食材的属性，以及全局的资源限制。

*   **集合 (Sets)**
    *   $P$: 蛋白质主食的集合, $P = \{\text{鸡肉, 三文鱼, 豆腐}\}$。
    *   $V$: 蔬菜的集合, $V = \{\text{西兰花, 胡萝卜, 菠菜, 甜椒, 蘑菇}\}$。

*   **参数 (Parameters)**
    *   **蛋白质主食属性 (对于 $\forall p \in P$)**
        *   $prot_p$: 蛋白质主食 $p$ 每100克的蛋白质含量 (g)。
        *   $cost_p$: 蛋白质主食 $p$ 每100克的价格 ($)。
    *   **蔬菜属性 (对于 $\forall v \in V$)**
        *   $prot_v$: 蔬菜 $v$ 每100克包装的蛋白质含量 (g)。
        *   $cost_v$: 蔬菜 $v$ 每100克包装的价格 ($)。
        *   $w_v$: 蔬菜 $v$ 每100克包装的重量 (g)，此处均为100g。
    *   **全局限制**
        *   $B_{max}$: 最大预算 ($)。
        *   $W_{max}$: 最大总重量 (g)。
        *   $N_{min}$: 需要选择的最少蔬菜种类数量。
        *   $M$: 一个足够大的正数，用于逻辑约束。在此问题中，可取 $M=8$ (在800g重量限制下最多能买8包蔬菜)。

具体数值如下：

**蛋白质主食数据**
| 索引 $p$ | 名称 | $prot_p$ (g/100g) | $cost_p$ ($/100g) |
| :--- | :--- | :--- | :--- |
| 1 | 鸡肉 | 23 | 3.00 |
| 2 | 三文鱼 | 20 | 5.00 |
| 3 | 豆腐 | 8 | 1.50 |

**蔬菜数据**
| 索引 $v$ | 名称 | $prot_v$ (g/pack) | $cost_v$ ($/pack) | $w_v$ (g/pack) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | 西兰花 | 2.8 | 1.20 | 100 |
| 2 | 胡萝卜 | 0.9 | 0.80 | 100 |
| 3 | 菠菜 | 2.9 | 1.50 | 100 |
| 4 | 甜椒 | 1.0 | 1.00 | 100 |
| 5 | 蘑菇 | 3.1 | 2.00 | 100 |

**全局参数**
| 参数 | 描述 | 值 |
| :--- | :--- | :--- |
| $B_{max}$ | 最大预算 | $20 |
| $W_{max}$ | 最大重量 | 800 g |
| $N_{min}$ | 最少蔬菜种类 | 3 |

# 数学形式

## 变量定义
为表示每种食材的选择量，我们定义了三类决策变量：

| 变量 | 定义 | 类型 | 索引 |
| :--- | :--- | :--- | :--- |
| $x_p$ | 购买蛋白质主食 $p$ 的份数 (每份100g) | 连续非负 | $p \in P$ |
| $y_v$ | 购买蔬菜 $v$ 的包装数 (每包100g) | 整数非负 | $v \in V$ |
| $z_v$ | 是否购买蔬菜 $v$ (至少一包) | 二元 | $v \in V$ |

*   $x_p$: 一个连续变量，表示购买蛋白质主食 $p$ 的数量，单位为“100克份数”。
*   $y_v$: 一个非负整数变量，表示购买蔬菜 $v$ 的100克包装的数量。
*   $z_v$: 一个辅助二元变量。如果购买了蔬菜 $v$ (即 $y_v \ge 1$)，则 $z_v=1$；否则 $z_v=0$。

## 目标函数
我们的目标是最大化所有选定食材的总蛋白质含量。
*   **最大化总蛋白质:** $\max \left( \sum_{p \in P} prot_p \cdot x_p + \sum_{v \in V} prot_v \cdot y_v \right)$

## 约束条件
模型必须满足以下所有约束条件：

1.  **基本资源约束 (Fundamental Resource Constraints):**
    *   **预算约束:** 所有购买食材的总成本不能超过最大预算。
        *   **公式:** $\sum_{p \in P} cost_p \cdot x_p + \sum_{v \in V} cost_v \cdot y_v \le B_{max}$
    *   **重量约束:** 所有购买食材的总重量不能超过最大重量。此公式中，所有项的单位均为“克”，确保了加和的有效性。
        *   **公式:** $\sum_{p \in P} 100 \cdot x_p + \sum_{v \in V} w_v \cdot y_v \le W_{max}$

2.  **食材选择规则约束 (Ingredient Selection Rules):**
    *   **蔬菜种类数量约束:** 被选中的蔬菜**种类**总数必须至少为 $N_{min}$。
        *   **公式:** $\sum_{v \in V} z_v \ge N_{min}$
    *   **变量关联约束:** 这组约束用于将整数变量 $y_v$ (购买包数) 和二元变量 $z_v$ (是否购买) 的逻辑关联起来。
        *   **说明:** 第一个公式确保只有当 $z_v=1$ 时，$y_v$ 才能大于0。第二个公式确保只要 $z_v=1$，$y_v$ 就必须至少为1。
        *   **公式 1:** $y_v \le M \cdot z_v, \forall v \in V$
        *   **公式 2:** $y_v \ge z_v, \forall v \in V$

3.  **变量域约束 (Variable Domain Constraints):**
    *   **说明:** 定义每个决策变量的取值范围。
    *   **公式:**
        *   $x_p \ge 0, \forall p \in P$
        *   $y_v \in \mathbb{Z}^+, \forall v \in V$ (即 $y_v$ 为非负整数)
        *   $z_v \in \{0, 1\}, \forall v \in V$